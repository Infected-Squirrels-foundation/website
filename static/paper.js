// Generated by CoffeeScript 1.3.3
(function() {

  $(function() {
    window.interpret = _.debounce(function() {
      if ($('textarea').val().length % 10 === 0) {
        $('.stdout').html('loading...');
        return $.post('/interpret', {
          code: $('textarea').val()
        }, function(res) {
          return $('.stdout').html(res);
        });
      } else {
        return $('.stdout').html("wrong input length (need " + (10 - $('textarea').val().length % 10) + " more)");
      }
    }, 500);
    return window.go = function() {
      var editor_height, line_width, val;
      line_width = $('.width_template').width();
      editor_height = $('textarea').height();
      $('textarea').hide();
      $('.buttons').hide();
      val = $('textarea').val();
      $('<div class=\"paper\"></div>').appendTo('.paper_wrap').css({
        'min-height': editor_height
      }).text(val);
      return setTimeout(function() {
        $('.paper').css({
          width: line_width
        });
        return setTimeout(function() {
          val = val.replace(/(\d{2})(\d{3})/g, '$1:$2');
          val = val.replace(/1/g, '‚óè');
          val = val.replace(/0/g, '&nbsp;');
          return $('.paper').html(val).css({
            background: 'url(/static/paper_fibers.png)',
            'line-height': '.6em'
          });
        }, 1500);
      }, 500);
    };
  });

}).call(this);
